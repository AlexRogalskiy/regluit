{% extends "basedocumentation.html" %}

{% block doccontent %}

<h2>Rights Holder Admin</h2>

<h3> Create New Rights Holder </h3>
<form method="POST" action="#">
    {% csrf_token %}
    {{ form.as_p }}
    <input type="submit" name="create_rights_holder" value="Create" id="submit">
</form>

<h3> Accepted Rights Holders </h3>
<dl>
{% for rights_holder in rights_holders %}
	<dt>{{ rights_holder.rights_holder_name }}</dt>
	<dd>PSA #: {{ rights_holder.id }}</dd>
	<dd>email: {{ rights_holder.email }}</dd>
	<dd>owner: <a href="{% url supporter supporter_username=rights_holder.owner %}">{{ rights_holder.owner }}</a></dd>
{% endfor %}
</dl>

{% if pending %}
<h3> Pending Claims </h3>
<form method="POST" action="#">
    {{ pending_formset.management_form }}
    {% csrf_token %}
<dl>
{% for claim, claim_form in pending %}
	<dt>Title: <a href="{% url work work_id=claim.work.id %}">{{claim.work.title }}</a></dt>
	<dd>Author: {{claim.work.author }}</dd>
	<dd>By: {{ claim.user.username }}</dd>
	<dd>On Behalf of: {{ claim.rights_holder.rights_holder_name }}</dd>
	<dd>PSA #: {{ claim.rights_holder.id }}</dd>
	<dd>Date of Claim : {{ claim.created }}</dd>
	<dd>Status: {{ claim.status }}</dd>
	<dd> Change to:</dd> {{ claim_form.as_p }}
    <input type="submit" name="set_claim_status" value="Set Claim Status" id="submit">
{% endfor %}
</dl>
</form>
{% endif %}
{% if active_data.count %}
<h3> Active Claims: {{ active_data.count }} </h3>
<dl>
{% for claim in active_data %}
	<dt>Title: <a href="{% url work work_id=claim.work.id %}">{{claim.work.title }}</a></dt>
	<dd>Author: {{claim.work.author }}</dd>
	<dd>By: {{ claim.user.username }}</dd>
	<dd>On Behalf of: {{ claim.rights_holder.rights_holder_name }}</dd>
	<dd>PSA #: {{ claim.rights_holder.id }}</dd>
	<dd>Date of Claim : {{ claim.created }}</dd>
	<dd>Status: {{ claim.status }}</dd>
{% endfor %}
</dl>
{% endif %}

{% endblock %}